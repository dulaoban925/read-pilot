# ReadPilot Backend Configuration
# Copy this file to .env and fill in actual values

# ===== Application Configuration =====
PROJECT_NAME=ReadPilot API
DESCRIPTION=AI-powered reading companion for intelligent document interaction
VERSION=0.1.0
ENVIRONMENT=development  # development, staging, production

# ===== API Configuration =====
API_V1_PREFIX=/api/v1
CORS_ORIGINS=["http://localhost:3000","http://localhost:3001"]

# ===== Database Configuration =====
# PostgreSQL (recommended - supports pgvector)
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/readpilot

# SQLite (for quick testing)
# DATABASE_URL=sqlite+aiosqlite:///./readpilot.db

# ===== Redis Configuration =====
REDIS_URL=redis://localhost:6379/0

# ===== Vector Database (ChromaDB) =====
CHROMADB_PATH=./data/chromadb
CHROMADB_COLLECTION_NAME=document_chunks

# ===== AI/LLM Configuration =====
# 支持三种 AI 提供商: OpenAI, Anthropic, 阿里云千问 (Qwen)
# 至少需要配置一个 API Key

# OpenAI (可选)
OPENAI_API_KEY=your-openai-api-key-here

# Anthropic (可选)
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# 阿里云千问 Qwen (推荐 - 支持 LLM 和 Embedding)
QWEN_API_KEY=your-qwen-api-key-here

# AI 提供商选择
# PRIMARY_AI_PROVIDER: 主要使用的 LLM 提供商
# FALLBACK_AI_PROVIDER: 主提供商失败时的降级选项
PRIMARY_AI_PROVIDER=qwen  # openai, anthropic, qwen
FALLBACK_AI_PROVIDER=openai  # openai, anthropic, qwen

# LLM 模型配置
LLM_PROVIDER=qwen  # openai, anthropic, qwen
LLM_MODEL=qwen-max  # qwen-max, qwen-plus, qwen-turbo, qwen-flash, gpt-4o-mini, claude-3-5-sonnet

# Embedding 模型配置
# 注意: Embedding 服务跟随 PRIMARY_AI_PROVIDER:
#   - PRIMARY_AI_PROVIDER=qwen → 使用 Qwen Embedding
#   - PRIMARY_AI_PROVIDER=openai → 使用 OpenAI Embedding
#   - PRIMARY_AI_PROVIDER=anthropic → 降级到 OpenAI 或 Qwen (Anthropic 不支持 Embedding)
EMBEDDING_MODEL=text-embedding-v3  # text-embedding-v3 (Qwen), text-embedding-3-small (OpenAI)
EMBEDDING_DIMENSION=1536

# ===== Text Processing =====
CHUNK_SIZE=800  # tokens
CHUNK_OVERLAP=100  # tokens
MAX_CONCURRENT_CHUNKS=10

# ===== File Upload Configuration =====
MAX_UPLOAD_SIZE=52428800  # 50MB in bytes
ALLOWED_EXTENSIONS=[".pdf",".epub",".txt",".md",".docx"]
UPLOAD_DIR=./data/documents

# ===== Security =====
SECRET_KEY=your-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7 days
